---
title: 物联网终端设计
date:  2019-11-19 18:13:06
index_img: /uploads/wps1.jpg
tags: 
- 硬件设计

categories: 
- 物联网

author: wangwenhai
---
本文作者：[wangwenhai] # 概要：物联网设备终端硬件设计思路。
<!-- more -->

# 一、 硬件概述

## 1. 终端节点设备设计背景

Esp8266成本非常低内置TCP/IP协议栈和WLAN可以通过arduino IDE、lua脚本开发，目前物联网的软件开发非常的破碎，也没有统一的数据传输模式，我们通过arduino IDE开发的easyiot_cli框架可以通过简单地命令配置接入后台内部包含有mqtt、tcp/ip、udp、coap等常见协议。简化物联网开发流程降低开发难度。

硬件部分采用esp8266，使用easyiot_cli作为基础可拓展的嵌入式程序，适配DHT11、OLED、LED、蜂鸣器，可拓展使用I/O的外设。基础架构如图1所示。

![img](/uploads/wps1.jpg)



图一



 

## 2. 整体架构

未来通过嵌入式系统的开发和移植，实现多设备统一标准开发如图二所示，以RTOS为容器开发硬件接口实现外设驱动，内部通过移植mqtt等协议栈实现通信，对用户层暴露一定的硬件接口完成用户逻辑，尽量抽象化，使用户通过实现接口完成自己需要的业务代码。如有必要可以增加显示设备，如无必要勿增实体。![img](/uploads/wps2.jpg)

图二



### 3. 商业鉴权

商业版在代码核心中增加uuid，通过在服务端注册实现鉴权。

### 4. 网关设计

通过嵌入式操作系统结合多种通信模块实现网关对终端节点的管理，通过与云服务器通信实现网关节点命令下发、数据采集、状态查询等任务。在应对密集设备环境下通过此架构可以降低决服务器载荷，节省硬件设备资源。架构如图三所示

![img](/uploads/wps3-1574158407191.png)



图三



 